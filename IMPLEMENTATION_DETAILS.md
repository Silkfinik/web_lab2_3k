# Отчет о выполненной работе: Интеграция HttpClient и Паттерн Адаптер

В рамках лабораторной работы (Часть 2) была выполнена интеграция `HttpClient` и реализован архитектурный паттерн "Адаптер" для гибкого переключения между источниками данных (Firebase Firestore и Spring Boot Backend).

## 1. Внесенные изменения

### A. Архитектура (Паттерн Адаптер)
Для унификации работы с данными был создан абстрактный класс `AbstractDataService`. Это позволило отвязать компоненты от конкретной реализации сервиса.

*   **Файл:** `src/app/Services/services/abstract-data.service.ts`
*   **Суть:** Определяет контракт (интерфейс) для всех методов работы с данными (`getServices`, `addService` и т.д.).

### B. Реализации сервисов
Оба сервиса теперь наследуются от `AbstractDataService` и находятся в единой директории `src/app/Services/services/`.

1.  **`ServiceService` (Spring Boot):**
    *   Реализует взаимодействие с REST API через `HttpClient`.
    *   **URL API:** `http://localhost:8080/DemoSpring/api/services` (Абсолютный путь).
    *   **CORS:** Взаимодействие настроено напрямую, без использования прокси. Конфигурация `proxy.conf.json` удалена.
2.  **`FirestoreService` (Firebase):**
    *   Адаптирован под новый интерфейс: методы, ранее возвращавшие `Promise`, теперь возвращают `Observable`.
    *   Сохраняет полную функциональность работы с облачной базой данных.

### C. Конфигурация приложения (`src/app/app.config.ts`)
Внедрение зависимости теперь происходит через токен `AbstractDataService`. Переключение между бэкендами осуществляется заменой одной строки в конфигурации.

```typescript
providers: [
    // ...
    provideHttpClient(),
    // Выбор активного сервиса:
    { provide: AbstractDataService, useClass: ServiceService } 
    // { provide: AbstractDataService, useClass: FirestoreService } // Раскомментировать для Firebase
]
```

## 2. Обновление компонентов
Компоненты `ServiceList`, `ServiceDetails` и `ServiceEdit` были отрефакторены:
*   Убрана прямая зависимость от `FirestoreService`.
*   В конструкторы внедряется `AbstractDataService`.
*   Логика обновлена для работы с `Observable` (используется `.subscribe()` вместо `.then()`).

Это означает, что **код компонентов больше не нужно менять** при смене источника данных.

## 3. Требования к Backend (Spring Boot)

Для корректной работы приложения в режиме `ServiceService` необходим запущенный сервер:

1.  **Base URL:** `http://localhost:8080/DemoSpring`
2.  **CORS:** Сервер должен разрешать запросы с `http://localhost:4200` глобально (в том числе для редиректов и фильтров безопасности).
3.  **API Endpoints:**
    *   `GET /api/services` — список услуг.
    *   `POST /api/services` — создание услуги.
    *   `GET /api/services/{id}` — услуга по ID.
    *   `PUT /api/services` — обновление услуги.
    *   `DELETE /api/services/{id}` — удаление услуги.

---
**Итог:** Клиентская часть полностью готова. Реализована возможность мгновенного переключения между Firebase (для тестов/демо) и Spring Boot (для сдачи лабораторной работы) без изменения кода компонентов.